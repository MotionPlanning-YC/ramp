<launch>



<arg name="robot1_name" value="robot1" />
<arg name="robot2_name" value="robot2" />



<!-- Define the machines -->

<machine name="robot1" address="192.168.1.101" env-loader="/opt/ros/hydro/env.sh" user="corobotclassic" /> 
<machine name="robot2" address="192.168.1.102" env-loader="/opt/ros/hydro/env.sh" user="corobotclassic" />




<!-- Trajectory Generator -->
<node name="trajectory_generator" pkg="trajectory_generator" type="trajectory_generator" />

<!-- Path Modification -->
<node name="path_modification" pkg="path_modification" type="path_modification" />


<!-- Trajectory Visualization -->
<node name="trajectory_visualisation" pkg="trajectory_visualisation" type="trajectory_visualisation" output="screen" /> 



<!-- Planners -->


<!-- We need 2 planners, one for the first robot and one for the second robot -->
<group ns="$(arg robot1_name)">
  <node name="ramp_planner" pkg="ramp_planner" type="ramp_planner" output="screen" >
    <param name="robot_update" type="str" value="/$(arg robot1_name)/update" />
  </node>
</group> 

<group ns="$(arg robot2_name)"> 
  <node name="ramp_planner" pkg="ramp_planner" type="ramp_planner"> 
    <param name="robot_update" type="str" value="/$(arg robot2_name)/update" /> 
  </node>
</group> 



<!-- Sensing nodes -->

<group ns="$(arg robot1_name)"> 
  <node name="ramp_sensing" pkg="ramp_sensing" type="ramp_sensing" output="screen"> 
    <param name="other_robot_odom" type="str" value="/$(arg robot2_name)/odometry" />  
  </node> 
</group> 

<group ns="$(arg robot2_name)"> 
   <node name="ramp_sensing" pkg="ramp_sensing" type="ramp_sensing" output="screen">  
     <param name="other_robot_odom" type="str" value="/$(arg robot1_name)/odometry" /> 
   </node> 
</group> 



<!-- Evaluation -->

<group ns="$(arg robot1_name)">
  <node name="trajectory_evaluation" pkg="trajectory_evaluation" type="trajectory_evaluation" output="screen">
    <param name="robot_id" type="int" value="1" />
  </node>
</group> 

<group ns="$(arg robot2_name)">
  <node name="trajectory_evaluation" pkg="trajectory_evaluation" type="trajectory_evaluation" output="screen"> 
    <param name="robot_id" type="int" value="2" />
  </node>
</group> 






<!-- Start the robot nodes -->

<group ns="$(arg robot1_name)" >
  <node name="ramp_control" pkg="ramp_control" type="ramp_control" machine="robot1"/> 
    <param name="orientation" type="double" value="3.14159" />
</group> 


<group ns="$(arg robot2_name)"> 
  <node name="ramp_control" pkg="ramp_control" type="ramp_control" machine="robot2" /> 
    <param name="orientation" type="double" value="0" />
</group> 



<!-- Launch the other files to start remote nodes -->
<include file="$(find ramp_launch)/launch/launch_include/general.launch" />
<include file="$(find ramp_launch)/launch/launch_include/phidget_sensors.launch" /> 
<include file="$(find ramp_launch)/launch/launch_include/motors.launch" />



</launch>
